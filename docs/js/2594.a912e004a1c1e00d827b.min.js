(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[2594],{4017:(r,t,e)=>{"use strict";var s=e(26729),i=function(r){var t,e,i=new Promise((function(){t=arguments[0],e=arguments[1]}));if(r)return{resolve:t,reject:e,eventEmitter:i};var o=new s;return i._events=o._events,i.emit=o.emit,i.on=o.on,i.once=o.once,i.off=o.off,i.listeners=o.listeners,i.addListener=o.addListener,i.removeListener=o.removeListener,i.removeAllListeners=o.removeAllListeners,{resolve:t,reject:e,eventEmitter:i}};i.resolve=function(r){var t=i(!0);return t.resolve(r),t.eventEmitter},r.exports=i},98991:(r,t,e)=>{"use strict";var s=e(28911),i=e(84390).errors,o=function(r){this.requestManager=r,this.requests=[]};o.prototype.add=function(r){this.requests.push(r)},o.prototype.execute=function(){var r=this.requests;this.requestManager.sendBatch(r,(function(t,e){e=e||[],r.map((function(r,t){return e[t]||{}})).forEach((function(t,e){if(r[e].callback){if(t&&t.error)return r[e].callback(i.ErrorResponse(t));if(!s.isValidResponse(t))return r[e].callback(i.InvalidResponse(t));try{r[e].callback(null,r[e].format?r[e].format(t.result):t.result)}catch(t){r[e].callback(t)}}}))}))},r.exports=o},72319:r=>{"use strict";var t,e=null;try{t=Function("return this")()}catch(r){t=window}void 0!==t.ethereum?e=t.ethereum:void 0!==t.web3&&t.web3.currentProvider&&(t.web3.currentProvider.sendAsync&&(t.web3.currentProvider.send=t.web3.currentProvider.sendAsync,delete t.web3.currentProvider.sendAsync),!t.web3.currentProvider.on&&t.web3.currentProvider.connection&&"ipcProviderWrapper"===t.web3.currentProvider.connection.constructor.name&&(t.web3.currentProvider.on=function(r,t){if("function"!=typeof t)throw new Error("The second parameter callback must be a function.");if("data"===r)this.connection.on("data",(function(r){var e="";r=r.toString();try{e=JSON.parse(r)}catch(e){return t(new Error("Couldn't parse response data"+r))}e.id||-1===e.method.indexOf("_subscription")||t(null,e)}));else this.connection.on(r,t)}),e=t.web3.currentProvider),r.exports=e},24983:(r,t,e)=>{"use strict";const{callbackify:s}=e(89539);var i=e(84390).errors,o=e(28911),n=e(98991),a=e(72319),c=function r(t,e){this.provider=null,this.providers=r.providers,this.setProvider(t,e),this.subscriptions=new Map};c.givenProvider=a,c.providers={WebsocketProvider:e(69556),HttpProvider:e(34351),IpcProvider:e(73097)},c.prototype.setProvider=function(r,t){var e=this;if(r&&"string"==typeof r&&this.providers)if(/^http(s)?:\/\//i.test(r))r=new this.providers.HttpProvider(r);else if(/^ws(s)?:\/\//i.test(r))r=new this.providers.WebsocketProvider(r);else if(r&&"object"==typeof t&&"function"==typeof t.connect)r=new this.providers.IpcProvider(r,t);else if(r)throw new Error("Can't autodetect provider for \""+r+'"');if(this.provider&&this.provider.connected&&this.clearSubscriptions(),this.provider=r||null,this.provider&&this.provider.on){"function"==typeof r.request?this.provider.on("message",(function(r){if(r&&"eth_subscription"===r.type&&r.data){const t=r.data;t.subscription&&e.subscriptions.has(t.subscription)&&e.subscriptions.get(t.subscription).callback(null,t.result)}})):this.provider.on("data",(function(r,t){(r=r||t).method&&r.params&&r.params.subscription&&e.subscriptions.has(r.params.subscription)&&e.subscriptions.get(r.params.subscription).callback(null,r.params.result)})),this.provider.on("connect",(function(){e.subscriptions.forEach((function(r){r.subscription.resubscribe()}))})),this.provider.on("error",(function(r){e.subscriptions.forEach((function(t){t.callback(r)}))}));const t=function(r){e._isCleanCloseEvent(r)&&!e._isIpcCloseError(r)||(e.subscriptions.forEach((function(t){t.callback(i.ConnectionCloseError(r)),e.subscriptions.delete(t.subscription.id)})),e.provider&&e.provider.emit&&e.provider.emit("error",i.ConnectionCloseError(r))),e.provider&&e.provider.emit&&e.provider.emit("end",r)};this.provider.on("close",t),this.provider.on("disconnect",t)}},c.prototype.send=function(r,t){if(t=t||function(){},!this.provider)return t(i.InvalidProvider());const{method:e,params:n}=r,a=o.toPayload(e,n),c=this._jsonrpcResultCallback(t,a);if(this.provider.request){s(this.provider.request.bind(this.provider))({method:e,params:n},t)}else if(this.provider.sendAsync)this.provider.sendAsync(a,c);else{if(!this.provider.send)throw new Error("Provider does not have a request or send method to use.");this.provider.send(a,c)}},c.prototype.sendBatch=function(r,t){if(!this.provider)return t(i.InvalidProvider());var e=o.toBatchPayload(r);this.provider[this.provider.sendAsync?"sendAsync":"send"](e,(function(r,e){return r?t(r):Array.isArray(e)?void t(null,e):t(i.InvalidResponse(e))}))},c.prototype.addSubscription=function(r,t){if(!this.provider.on)throw new Error("The provider doesn't support subscriptions: "+this.provider.constructor.name);this.subscriptions.set(r.id,{callback:t,subscription:r})},c.prototype.removeSubscription=function(r,t){if(this.subscriptions.has(r)){var e=this.subscriptions.get(r).subscription.options.type;return this.subscriptions.delete(r),void this.send({method:e+"_unsubscribe",params:[r]},t)}"function"==typeof t&&t(null)},c.prototype.clearSubscriptions=function(r){try{var t=this;return this.subscriptions.size>0&&this.subscriptions.forEach((function(e,s){r&&"syncing"===e.name||t.removeSubscription(s)})),this.provider.reset&&this.provider.reset(),!0}catch(r){throw new Error(`Error while clearing subscriptions: ${r}`)}},c.prototype._isCleanCloseEvent=function(r){return"object"==typeof r&&([1e3].includes(r.code)||!0===r.wasClean)},c.prototype._isIpcCloseError=function(r){return"boolean"==typeof r&&r},c.prototype._jsonrpcResultCallback=function(r,t){return function(e,s){return s&&s.id&&t.id!==s.id?r(new Error(`Wrong response id ${s.id} (expected: ${t.id}) in ${JSON.stringify(t)}`)):e?r(e):s&&s.error?r(i.ErrorResponse(s)):o.isValidResponse(s)?void r(null,s.result):r(i.InvalidResponse(s))}},r.exports={Manager:c,BatchManager:n}},28911:r=>{"use strict";var t={messageId:0,toPayload:function(r,e){if(!r)throw new Error('JSONRPC method should be specified for params: "'+JSON.stringify(e)+'"!');return t.messageId++,{jsonrpc:"2.0",id:t.messageId,method:r,params:e||[]}},isValidResponse:function(r){return Array.isArray(r)?r.every(t):t(r);function t(r){return!(!r||r.error||"2.0"!==r.jsonrpc||"number"!=typeof r.id&&"string"!=typeof r.id||void 0===r.result)}},toBatchPayload:function(r){return r.map((function(r){return t.toPayload(r.method,r.params)}))}};r.exports=t},96602:(r,t,e)=>{"use strict";var s=e(25108),i=e(45826),o=function(r){this.name=r.name,this.type=r.type,this.subscriptions=r.subscriptions||{},this.requestManager=null};o.prototype.setRequestManager=function(r){this.requestManager=r},o.prototype.attachToObject=function(r){var t=this.buildCall(),e=this.name.split(".");e.length>1?(r[e[0]]=r[e[0]]||{},r[e[0]][e[1]]=t):r[e[0]]=t},o.prototype.buildCall=function(){var r=this;return function(){r.subscriptions[arguments[0]]||s.warn("Subscription "+JSON.stringify(arguments[0])+" doesn't exist. Subscribing anyway.");var t=new i({subscription:r.subscriptions[arguments[0]]||{},requestManager:r.requestManager,type:r.type});return t.subscribe.apply(t,arguments)}},r.exports={subscriptions:o,subscription:i}},45826:(r,t,e)=>{"use strict";var s=e(84390).errors,i=e(26729),o=e(84390).formatters;function n(r){return r}function a(r){i.call(this),this.id=null,this.callback=n,this.arguments=null,this.lastBlock=null,this.options={subscription:r.subscription,type:r.type,requestManager:r.requestManager}}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype._extractCallback=function(r){if("function"==typeof r[r.length-1])return r.pop()},a.prototype._validateArgs=function(r){var t=this.options.subscription;if(t||(t={}),t.params||(t.params=0),r.length!==t.params)throw s.InvalidNumberOfParams(r.length,t.params,t.subscriptionName)},a.prototype._formatInput=function(r){var t=this.options.subscription;return t&&t.inputFormatter?t.inputFormatter.map((function(t,e){return t?t(r[e]):r[e]})):r},a.prototype._formatOutput=function(r){var t=this.options.subscription;return t&&t.outputFormatter&&r?t.outputFormatter(r):r},a.prototype._toPayload=function(r){var t=[];if(this.callback=this._extractCallback(r)||n,this.subscriptionMethod||(this.subscriptionMethod=r.shift(),this.options.subscription.subscriptionName&&(this.subscriptionMethod=this.options.subscription.subscriptionName)),this.arguments||(this.arguments=this._formatInput(r),this._validateArgs(this.arguments),r=[]),t.push(this.subscriptionMethod),t=t.concat(this.arguments),r.length)throw new Error("Only a callback is allowed as parameter on an already instantiated subscription.");return{method:this.options.type+"_subscribe",params:t}},a.prototype.unsubscribe=function(r){this.options.requestManager.removeSubscription(this.id,r),this.id=null,this.lastBlock=null,this.removeAllListeners()},a.prototype.subscribe=function(){var r=this,t=Array.prototype.slice.call(arguments),e=this._toPayload(t);if(!e)return this;if(!this.options.requestManager.provider)return setTimeout((function(){var t=new Error("No provider set.");r.callback(t,null,r),r.emit("error",t)}),0),this;if(!this.options.requestManager.provider.on)return setTimeout((function(){var t=new Error("The current provider doesn't support subscriptions: "+r.options.requestManager.provider.constructor.name);r.callback(t,null,r),r.emit("error",t)}),0),this;if(this.lastBlock&&this.options.params&&"object"==typeof this.options.params&&(e.params[1]=this.options.params,e.params[1].fromBlock=o.inputBlockNumberFormatter(this.lastBlock+1)),this.id&&this.unsubscribe(),this.options.params=e.params[1],"logs"===e.params[0]&&e.params[1]&&"object"==typeof e.params[1]&&e.params[1].hasOwnProperty("fromBlock")&&isFinite(e.params[1].fromBlock)){var s=Object.assign({},e.params[1]);this.options.requestManager.send({method:"eth_getLogs",params:[s]},(function(t,e){t?setTimeout((function(){r.callback(t,null,r),r.emit("error",t)}),0):e.forEach((function(t){var e=r._formatOutput(t);r.callback(null,e,r),r.emit("data",e)}))}))}return"object"==typeof e.params[1]&&delete e.params[1].fromBlock,this.options.requestManager.send(e,(function(t,s){!t&&s?(r.id=s,r.method=e.params[0],r.emit("connected",s),r.options.requestManager.addSubscription(r,(function(t,e){t?(r.callback(t,!1,r),r.emit("error",t)):(Array.isArray(e)||(e=[e]),e.forEach((function(t){var e=r._formatOutput(t);if(r.lastBlock=e&&"object"==typeof e?e.blockNumber:null,"function"==typeof r.options.subscription.subscriptionHandler)return r.options.subscription.subscriptionHandler.call(r,e);r.emit("data",e),r.callback(null,e,r)})))}))):setTimeout((function(){r.callback(t,!1,r),r.emit("error",t)}),0)})),this},a.prototype.resubscribe=function(){this.options.requestManager.removeSubscription(this.id),this.id=null,this.subscribe(this.callback)},r.exports=a},37327:(r,t,e)=>{"use strict";var s=e(84390).formatters,i=e(93952),o=e(18269);r.exports=function(r){var t=function(t){var e;return t.property?(r[t.property]||(r[t.property]={}),e=r[t.property]):e=r,t.methods&&t.methods.forEach((function(t){t instanceof i||(t=new i(t)),t.attachToObject(e),t.setRequestManager(r._requestManager)})),r};return t.formatters=s,t.utils=o,t.Method=i,t}},92928:(r,t,e)=>{const s=e(24983),i=e(37327);r.exports={packageInit:(r,t)=>{if(t=Array.prototype.slice.call(t),!r)throw new Error('You need to instantiate using the "new" keyword.');Object.defineProperty(r,"currentProvider",{get:()=>r._provider,set:t=>r.setProvider(t),enumerable:!0,configurable:!0}),t[0]&&t[0]._requestManager?r._requestManager=t[0]._requestManager:r._requestManager=new s.Manager(t[0],t[1]),r.givenProvider=s.Manager.givenProvider,r.providers=s.Manager.providers,r._provider=r._requestManager.provider,r.setProvider||(r.setProvider=(t,e)=>(r._requestManager.setProvider(t,e),r._provider=r._requestManager.provider,!0)),r.setRequestManager=t=>{r._requestManager=t,r._provider=t.provider},r.BatchRequest=s.BatchManager.bind(null,r._requestManager),r.extend=i(r)},addProviders:r=>{r.givenProvider=s.Manager.givenProvider,r.providers=s.Manager.providers}}}}]);