"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[8880],{66416:(e,r,t)=>{t.d(r,{q:()=>i,N:()=>s});t(67294);var n=t(16550),a=t(93434),o=t(85893);function s(e){var r=e.navTitle,t=void 0===r?"":r,s=e.navFontSize,i=void 0===s?24:s,l=e.fontSize,c=void 0===l?18:l,d=e.titleColor,u=void 0===d?"#fff":d,p=(0,n.k6)();return(0,o.jsxs)("div",{className:"page-navbar__container",style:{color:u,fontSize:c},children:[(0,o.jsx)(a.Z,{style:{fontSize:i,marginLeft:"12px"},onClick:function(){return p.go(-1)}}),(0,o.jsx)("span",{className:"page-navbar__title",style:{color:u},children:t}),(0,o.jsx)("div",{className:"page-navbar__actions"})]})}function i(e){var r=(0,n.k6)(),t=e.navFontSize,s=void 0===t?24:t,i=e.fontSize,l=void 0===i?18:i,c=e.titleColor,d=void 0===c?"#fff":c;return(0,o.jsxs)("div",{className:"page-botbar__container",style:{color:d,fontSize:l},children:[(0,o.jsx)(a.Z,{style:{fontSize:s,marginLeft:"12px"},onClick:function(){return r.go(-1)}}),(0,o.jsx)("span",{className:"nav-title"}),(0,o.jsx)("div",{className:"page-botbar__actions"})]})}},89071:(e,r,t)=>{t.d(r,{Z:()=>re});var n=t(69798),a=t.n(n),o=t(14890),s=t(82100),i=t(16550),l=t(13535),c=t.n(l),d=t(56655),u=t(71649),p=t(68420),f=t(27344),h=t(84441),v=t(3020),m=t(3362),x=t(67294),b=t(79802),j=t(81516),k=t(5562),N=t(82240),_=t(95266),y=t(33938),g=t(37247),Z=t.n(g),w=t(88066),S=t.n(w),I=t(89356),C=t.n(I),P=t(54579),B=t.n(P),T=t(50047),L=t.n(T),M=t(63109),D=t.n(M),R=t(51005),A=t(58074),z=t(69039),V=t(3354),E=t(67126),F=t(70544),W=t(62576),H=t(57108),O=t(4141),q=t(44426),Q=t(85518),$=t(85893),U=t(25108),G=function(){var e=(0,y.Z)(D().mark((function e(r){var t,n,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r,e.prev=1,t){e.next=6;break}return e.next=5,(0,E.Nb)();case 5:t=e.sent;case 6:return e.next=8,(0,V.IO)(t);case 8:return n=e.sent,a=(0,j.o1)(n,100),e.abrupt("return",{selectedAddress:t,ids:n,groups:a});case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(r){return e.apply(this,arguments)}}();function X(e){var r=(0,i.k6)(),t=(0,s.I0)(),n=(0,s.v9)((function(e){return e.orderState})).orderList,o=void 0===n?[]:n,l=(0,s.v9)((function(e){return e.poolState.poolList})),c=(0,s.v9)((function(e){return e.dappState})),u=c.selectedAddress,p=(c.chainId,c.hasEthereum),f=(0,x.useState)(!1),h=(0,_.Z)(f,2),v=h[0],m=h[1],b=(0,x.useState)("Please use DApp in ImToken or Metamask mobile app"),g=(0,_.Z)(b,2),w=g[0],I=g[1];function P(){return(P=(0,y.Z)(D().mark((function e(t){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={pathname:(0,z.ZP)(z.k$,z._6),state:{orderId:t}},r.push(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,x.useEffect)((function(){p&&!u&&I("Not connected to the ethereum account, please refresh the DApp"),G(u).then((function(e){var r=e.ids,n=Z()(r).call(r,(function(e,r){return S()(e).call(e,[{orderId:r}])}),[]);return t((0,F.c)({orderIds:r,orderList:n})),e})).catch((function(e){U.log("Get Bill Ids Fail:>>>",e);var r=(0,H.e)(e);if(r===O.LU){var t=(0,E.dF)();I("Current network unsupport,please switch to ".concat(t)),m(!0)}else r===O.$S?(I("Please use DApp in ImToken or Metamask mobile app"),m(!0)):N.Z.show({icon:"fail",content:e.message,duration:4e3});return{}})).then((function(e){for(var r=e.groups,n=void 0===r?{}:r,o=C()(n).length,s=(0,W.rg)().methods.billDetails,i=function(e){var r=n[e],o=Z()(r).call(r,(function(e,r){return S()(e).call(e,[s(r).call({from:u})])}),[]);if(0===e)a().all(o).then((function(e){var n=(0,V.Q5)({orderIds:r,billResults:e,poolList:l});t((0,F.g)(n))}));else{a().all(o).then((function(e){var n=(0,V.Q5)({orderIds:r,billResults:e,poolList:l});t((0,F.g)(n))}))}},c=0;c<o;c++)i(c)})).catch((function(e){U.log(">>>>>>>>>Load order detail fail>>>>>>",e)})),B()((function(){(0,V.uL)().then((function(e){t((0,q.Qd)(e))})).catch((function(e){U.log("Load order config fail:",e)}))}),2e3)}),[]),(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("div",{className:"pl-order-title",children:(0,$.jsx)("div",{className:"inner-wrapper",children:(0,$.jsx)("span",{children:"Deposit Receipt"})})}),(0,$.jsx)("div",{className:"pl-order-container",children:v?(0,$.jsx)("div",{className:"pl-unsupport-wrapper",children:(0,$.jsx)(A.g,{iconFontSize:3,text:w})}):(0,$.jsx)(k.Z,{style:{overflowY:"hidden"},children:L()(o).call(o,(function(e,r){return(0,$.jsx)(k.Z.Item,{className:"pl-order-item",children:(0,$.jsxs)(d.Z,{className:"pl-order__card",children:[(0,$.jsxs)("div",{className:"pl-order__card-head",children:[(0,$.jsxs)("div",{className:"pl-order__card-info",children:[(0,$.jsxs)("div",{className:"order-info-line",children:[(0,$.jsx)("span",{className:"pl-order__card-label",children:"No."}),(0,$.jsx)("span",{className:"pl-order__card-valt",children:e.orderId})]}),(0,$.jsxs)("div",{className:"order-info-line",children:[(0,$.jsx)("span",{className:"pl-order__card-label",children:"Date"}),(0,$.jsx)("span",{className:"pl-order__card-valt",children:e.createDate})]}),(0,$.jsxs)("div",{className:"order-info-line",children:[(0,$.jsx)("span",{className:"pl-order__card-label",children:"Pool address"}),(0,$.jsx)("span",{className:"pl-order__card-valt",children:(0,j.VE)(e.poolAddress,18)})]})]}),(0,$.jsxs)("div",{className:"pl-order__card-action",onClick:function(){!function(e){P.apply(this,arguments)}(e.orderId)},children:[(0,$.jsx)("div",{className:Q.tq?"pool-name is-mobile":"pool-name",children:(0,$.jsx)("span",{children:e.poolName})}),(0,$.jsx)(R.Z,{fontSize:"18"})]})]}),(0,$.jsx)("div",{className:"pl-order__card-foot",children:(0,$.jsx)("span",{className:"pl-order__card-valt pledge-amount",children:e.depositedValt})})]})},"pledge-"+r)}))})})]})}function Y(e){var r=function(){if("undefined"==typeof Reflect||!c())return!1;if(c().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(c()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,m.Z)(e);if(r){var a=(0,m.Z)(this).constructor;t=c()(n,arguments,a)}else t=n.apply(this,arguments);return(0,v.Z)(this,t)}}var J=function(e){(0,h.Z)(t,e);var r=Y(t);function t(e){var n;return(0,p.Z)(this,t),(n=r.call(this,e)).state={tokenSymbol:"HOP",orders:(0,u.Z)(b.L),hasMore:!0},n}return(0,f.Z)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"renderHeader",value:function(){var e=this.props,r=e.isMobile,t=e.selectedAddress,n=e.hopBalance,a=this.state.tokenSymbol;return(0,$.jsx)("div",{className:"home-page__header",children:(0,$.jsxs)(d.Z,{className:r?"home-token-card is-mobile":"home-token-card",children:[(0,$.jsxs)("div",{className:"home-token-card__content",children:[(0,$.jsx)("h3",{className:"token-symbol",children:a}),(0,$.jsx)("p",{className:"token-address",children:t})]}),(0,$.jsx)("div",{className:"home-token-card__footer",children:(0,$.jsx)("span",{className:"token-hop-balance",children:n?(0,j.bc)(n,2):"-"})})]})})}},{key:"renderFooter",value:function(){return(0,$.jsx)("div",{className:"home-page__footer"})}},{key:"render",value:function(){var e=this.props,r=(e.hasEthereum,e.selectedAddress,e.isMobile),t=e.isBrowser,n=(0,j.Rt)("home-page",{isMobile:r,isBrowser:t});return(0,$.jsxs)("div",{className:n,children:[this.renderHeader(),(0,$.jsx)(X,{})]})}}]),t}(x.Component),K=t(59501),ee=t(25108);const re=(0,o.qC)(i.EN,(0,s.$j)((function(e){var r=e.skinState,t=r.isMobile,n=r.isBrowser,a=e.dappState,o=a.selectedAddress,s=void 0===o?"":o,i=a.hopBalance,l=a.hasEthereum;return{selectedAddress:s,isMobile:t,isBrowser:n,hopBalance:i,hasEthereum:void 0!==l&&l}}),(function(e){return{loadPoolList:function(){return function(e){return new(a())((function(e,r){W.j3.methods.getPoolList().call({},(function(t,n){return t?r(t):e(n)}))})).then((function(r){var t=poolIdsToPoolList(r);e({type:K.yw,val:t})})).catch((function(e){ee.warn(e)}))}}}})))(J)},79673:(e,r,t)=>{t.d(r,{Z:()=>z});var n=t(14890),a=t(82100),o=t(16550),s=t(13535),i=t.n(s),l=t(56655),c=t(68420),d=t(27344),u=t(84441),p=t(3020),f=t(3362),h=t(98882),v=t.n(h),m=t(67294),x=t(93434),b=t(81516),j=t(48168),k=t(93806),N=t(28195),_=t(82240),y=t(33938),g=t(95266),Z=t(63109),w=t.n(Z),S=t(3354),I=t(67126),C=t(85893),P=t(25108),B=function(e){var r=(0,a.v9)((function(e){return e.dappState})).selectedAddress,t=(0,m.useState)(!1),n=(0,g.Z)(t,2),o=n[0],s=n[1],i=(0,m.useState)(!1),l=(0,g.Z)(i,2),c=l[0],d=l[1],u=e.orderId,p=e.pledgeAmount,f=(e.tsSecond,e.canRedeem),h=void 0!==f&&f;function v(){return(v=(0,y.Z)(w().mark((function e(){var t,n,a,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}throw new Error("Please use it in ImToken app");case 3:return e.next=5,(0,S.Vn)(u,r);case 5:t=e.sent,n=t.status,a=t.blockNumber,d(!1),(Boolean(n)||a)&&_.Z.show({icon:"success",content:"Completed",duration:2e3}),s(!1),e.next=20;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0&&e.t0.code?e.t0.code:"",o=e.t0&&e.t0.message?e.t0.message:e.t0,P.warn("Withdraw Fail",e.t0),_.Z.show({icon:"fail",content:"Withdraw error:".concat(o),duration:3e3}),d(!1),s(!1);case 20:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(N.Z,{disabled:!h,color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:(0,y.Z)(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.Wf)();case 3:s(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),_.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Please use it in the ImToken app",duration:4e3});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),style:{maxWidth:"600px"},children:"Withdraw"}),(0,C.jsxs)(k.Z,{visible:o,position:"bottom",onMaskClick:function(){return!c&&s(!1)},bodyClassName:"brv-popup__body",bodyStyle:{minHeight:"35vh",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:[(0,C.jsx)("div",{className:"brv-popup__title",children:(0,C.jsx)("span",{className:"popup-title order-no",children:u})}),(0,C.jsx)("div",{className:"brv-popup__content",children:(0,C.jsxs)("p",{className:"popup-message",children:["This bill pre-profit ",p," HOP"]})}),(0,C.jsx)("div",{className:"brv-popup__bottom",children:(0,C.jsx)(N.Z,{disabled:c,color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:function(){return v.apply(this,arguments)},style:{maxWidth:"600px"},children:"Confirm"})})]})]})},T=t(41231);function L(e){var r=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,f.Z)(e);if(r){var a=(0,f.Z)(this).constructor;t=i()(n,arguments,a)}else t=n.apply(this,arguments);return(0,p.Z)(this,t)}}var M=function(e){(0,u.Z)(t,e);var r=L(t);function t(e){var n;return(0,c.Z)(this,t),(n=r.call(this,e)).state={orderId:"",createDay:"",dueDay:"",depositedValt:""},n}return(0,d.Z)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this.props,r=e.location,t=e.orderList,n=void 0===t?[]:t,a=e.asynPreCheckTxState,o=r.state,s=void 0===o?{}:o;if(s.orderId){this.setState({orderId:s.orderId});var i=v()(n).call(n,(function(e){return e.orderId===s.orderId}));i&&this.setState(i)}a&&a()}},{key:"componentWillUnmount",value:function(){}},{key:"renderHeader",value:function(){var e=this.props,r=(e.isMobile,e.isBrowser),t=e.history;return r&&(0,C.jsxs)("div",{className:"plo-detail__header",children:[(0,C.jsx)(x.Z,{style:{fontSize:24,color:"#fff",marginLeft:"12px"},onClick:function(){return t.go(-1)}}),(0,C.jsx)("span",{className:"brv-nav-title",children:this.state.orderId}),(0,C.jsx)("div",{className:"plo-detail__header-actions"})]})}},{key:"renderContent",value:function(){var e=this.props,r=(e.location,e.isMobile),t=e.isImToken,n=(e.poolProfitRate,e.userProfitRate),a=this.state,o=a.orderId,s=(a.createDay,a.createDate),i=a.depositedWei,c=a.depositedValt,d=a.dueDay,u=a.expireDate,p=a.poolAddress,f=a.poolName,h=(a.profit,(0,S.CV)(i,n)),v=(0,T.kA)(c,h),m=(0,b.pT)(d),x=(0,b.Rt)("plo-detail__content",{isMobile:r,isImToken:t});return(0,C.jsx)("div",{className:x,children:(0,C.jsxs)(l.Z,{headerClassName:"brv-card-title",title:o,className:"brv-card",children:[(0,C.jsxs)("div",{className:"brv-form",children:[(0,C.jsx)(j.a,{labelBox:!0,labelText:"Quota",labelValue:c}),(0,C.jsx)(j.a,{labelBox:!0,labelText:"Deposit Date",labelValue:s}),(0,C.jsx)(j.a,{labelBox:!0,labelText:"Expired Date",labelValue:u}),(0,C.jsx)(j.a,{labelBox:!0,labelText:"Pool Name",labelValue:f}),(0,C.jsx)(j.a,{labelBox:!0,labelText:"Pool Address",labelValue:(0,b.VE)(p)}),(0,C.jsx)(j.a,{labelBox:!0,labelText:"Pre-Profit",labelValue:h})]}),(0,C.jsx)("div",{className:"brv-card__footer",children:(0,C.jsx)(B,{orderId:o,pledgeAmount:v,canRedeem:m})})]})})}},{key:"renderFooter",value:function(){var e=this.props,r=e.history,t=e.isMobile;e.isImToken;return t&&(0,C.jsx)("div",{className:"plo-detail__footer",children:(0,C.jsx)(x.Z,{style:{fontSize:24,color:"#fff"},onClick:function(){return r.go(-1)}})})}},{key:"render",value:function(){return(0,C.jsxs)("div",{className:"plo-detail",children:[this.renderHeader(),this.renderContent(),this.renderFooter()]})}}]),t}(m.Component),D=t(27556),R=t(44426),A=t(25108);const z=(0,n.qC)(o.EN,(0,a.$j)((function(e){var r=e.skinState,t=r.isMobile,n=r.isBrowser,a=e.orderState,o=a.orderList,s=void 0===o?[]:o,i=(a.ethBalance,a.allowanceWei,a.poolProfitRate),l=void 0===i?1:i,c=a.userProfitRate;return{isMobile:t,orderList:s,isBrowser:n,poolProfitRate:l,userProfitRate:void 0===c?14:c}}),(function(e){return{asynPreCheckTxState:function(){(0,D.M)().then((function(r){e((0,R.X4)(r))})).catch((function(e){return A.log(e)}))}}})))(M)}}]);