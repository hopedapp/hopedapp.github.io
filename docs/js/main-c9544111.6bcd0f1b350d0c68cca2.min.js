(()=>{"use strict";var e,t={98623:(e,t,n)=>{n.d(t,{Z:()=>ve});var o=n(14890),r=n(82100),a=n(16550),i=n(13535),s=n.n(i),l=n(89356),c=n.n(l),d=n(63263),u=n.n(d),p=n(58377),f=n.n(p),h=n(28834),v=n.n(h),m=n(13038),x=n.n(m),b=n(32752),j=n.n(b),w=n(44341),g=n.n(w),y=n(56655),k=n(44845),Z=n(68420),_=n(27344),N=n(84441),T=n(3020),C=n(3362),S=n(98882),A=n.n(S),P=n(30699),B=n.n(P),O=n(88066),E=n.n(O),V=n(67294),L=n(48168),M=n(81516),I=n(66416),D=n(93806),R=n(5562),F=n(3771),W=n(28195),z=n(82240),H=n(33938),$=n(95266),q=n(63109),U=n.n(q),Y=n(21052),G=n.n(Y),X=n(96019),J=n.n(X),K=n(41231),Q=n(3354),ee=n(67126),te=n(85893),ne=n(25108),oe=function(e){var t=e.poolAddress,n=e.poolName,o=e.tsSecond,i=void 0===o?6:o,s=(0,a.k6)(),l=(0,r.v9)((function(e){return e.dappState})),c=l.hopBalance,d=l.selectedAddress,u=void 0===d?"":d,p=(l.hasEthereum,l.txTimeoutSeconds),f=void 0===p?8:p,h=(0,K.Ck)(c,0),v=(0,V.useState)(""),m=(0,$.Z)(v,2),x=m[0],b=m[1],j=(0,V.useState)(!1),w=(0,$.Z)(j,2),g=w[0],y=w[1],k=(0,V.useState)(!1),Z=(0,$.Z)(k,2),_=Z[0],N=Z[1];function T(){return(T=(0,H.Z)(U().mark((function e(){var n,o;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C(x),e.next=4,(0,Q.cy)(t,n,u);case 4:o=e.sent,N(!0),o.send({from:u}).on("transactionHash",(function(e){N(!0),z.Z.show({icon:"loading",content:(0,te.jsx)(re,{hash:e,txTimeoutSeconds:f}),duration:1e3*f,afterClose:function(){N(!1),y(!1),s.push("/pool")}})})).on("error",(function(e,t){ne.log(">>>>>>>>Deposited>>>>>",e),e&&4001===e.code?z.Z.show({icon:"fail",content:e&&e.message?e.message:"Deposit Fail.",duration:3e3,afterClose:function(){N(!1)}}):e&&!e.code?z.Z.show({icon:"fail",content:e&&e.message?e.message:"Deposit Fail.",duration:1e3*i,afterClose:function(){N(!1),y(!1)}}):(N(!1),y(!1))})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),N(!1),z.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Deposit Fail.",duration:3e3});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function C(e){if(!/^[0-9]+(.[0-9]+)?$/.test(e))throw new Error("Please enter HOP amount ");if(Number(e)-h>0)throw b(h),new Error("This account only has ".concat(h," HOP"));return G()(e)}return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(W.Z,{color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:(0,H.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ee.Wf)();case 3:y(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),z.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Please use it in the ImToken app",duration:4e3});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),style:{maxWidth:"600px"},children:"Deposit"}),(0,te.jsxs)(D.Z,{visible:g,position:"bottom",onMaskClick:function(){return!_&&y(!1)},bodyClassName:"brv-popup__body",bodyStyle:{minHeight:"35vh",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:[(0,te.jsx)("div",{className:"brv-popup__title",children:(0,te.jsx)("span",{className:"popup-title order-no",children:n})}),(0,te.jsx)("div",{className:"brv-popup__content",children:(0,te.jsx)(R.Z,{style:{"--prefix-width":"6em","--font-size":"14px"},children:(0,te.jsx)(R.Z.Item,{className:"brv-form-listitem",prefix:(0,te.jsx)("label",{className:"brv-input-label",style:{fontSize:"16px",fontWeight:"bold",color:"#9A999C",textAlign:"right"},children:"HOP:"}),children:(0,te.jsx)(F.Z,{placeholder:"Maximum ".concat(h," HOP"),value:x,onChange:function(e){b(e)},clearable:!0,disabled:_,style:{"--font-size":"14px"}})})})}),(0,te.jsx)("div",{className:"brv-popup__bottom",children:(0,te.jsx)(W.Z,{disabled:_,color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:function(){return T.apply(this,arguments)},style:{maxWidth:"600px"},children:"Confirm"})})]})]})};function re(e){e.hash;var t=e.txTimeoutSeconds,n=void 0===t?8:t,o=(0,V.useState)(n),r=(0,$.Z)(o,2),a=r[0],i=r[1];return(0,V.useEffect)((function(){var e=J()((function(){i((function(e){return e>1?e-1:e}))}),1e3);return function(){window.clearInterval(e)}}),[]),(0,te.jsxs)("p",{children:[(0,te.jsx)("span",{children:"Transaction packing. This will go back to list after"}),(0,te.jsx)("span",{style:{color:"#dc7548",paddingLeft:"0.2em",paddingRight:"0.2em"},children:a}),"seconds."]})}var ae=n(44371),ie=n(44426),se=n(25108),le=function(e){var t=(0,a.k6)(),n=(0,V.useState)(!1),o=(0,$.Z)(n,2),i=o[0],s=o[1],l=(0,V.useState)(!1),c=(0,$.Z)(l,2),d=c[0],u=c[1],p=e.ethBalanceValt,f=void 0===p?0:p,h=(0,r.v9)((function(e){return e.dappState})),v=h.currDepositAddress,m=void 0===v?"":v,x=h.selectedAddress,b=void 0===x?"":x,j=h.txTimeoutSeconds,w=void 0===j?8:j,g=(0,r.I0)(),y=function(){var e=(0,H.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ee.Wf)();case 3:if(!(f<ee.AY)){e.next=5;break}throw new Error("Insufficient Gas fees");case 5:s(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),z.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Please use it in the ImToken app",duration:4e3});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();function k(){return k=(0,H.Z)(U().mark((function e(n){var o,r;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return z.Z.show({icon:"fail",content:"No account connected",duration:3e3}),e.abrupt("return");case 5:return u(!0),e.prev=6,e.next=9,(0,ae.LY)(n);case 9:o=e.sent,delete window._isTxTimeouted,delete window._txPending,delete window._txFail,o.send({from:n}).on("transactionHash",(function(e){var n;E()(n="Transaction [".concat(e,"] packing. This will go back to list after ")).call(n,w," seconds.");window._txPending=!0,z.Z.show({icon:"loading",content:(0,te.jsx)(ce,{hash:e,txTimeoutSeconds:w}),duration:1e3*G()(w),afterClose:function(){u(!1),s(!1),!0===window._txPending&&(window._isTxTimeouted=!0,t.push("/pool"))}})})).on("receipt",(function(e){if(e&&e.status&&e.events){var t=e.events.Approval,n=void 0===t?{}:t,o=n.returnValues&&n.returnValues.value?n.returnValues.value:"0";delete window._txPending,o&&"0"!==o?(g((0,ie.cN)(o)),window._isTxTimeouted||(z.Z.clear(),u(!1),s(!1))):window._isTxTimeouted||u(!1)}})).on("error",(function(e,t){delete window._txPending,z.Z.clear(),e&&4001===e.code?z.Z.show({icon:"fail",content:e.message||"Approved fail.",duration:3e3,afterClose:function(){u(!1)}}):z.Z.show({icon:"fail",content:e&&e.message?e.message:"Approved Fail.",duration:4e3,afterClose:function(){u(!1),s(!1)}})})),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(6),u(!1),r=e.t0&&e.t0.message?e.t0.message:"",se.log("Approved fail:",e.t0),z.Z.show({icon:"fail",content:"Approve error ".concat(r),duration:3e3});case 22:case"end":return e.stop()}}),e,null,[[6,16]])}))),k.apply(this,arguments)}return(0,V.useEffect)((function(){return function(){}}),[]),(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(W.Z,{color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:y,style:{maxWidth:"600px"},children:"Approve"}),(0,te.jsxs)(D.Z,{visible:i,position:"bottom",onMaskClick:function(){return!d&&s(!1)},bodyClassName:"brv-popup__body",bodyStyle:{minHeight:"35vh",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:[(0,te.jsx)("div",{className:"brv-popup__title",children:(0,te.jsx)("span",{className:"popup-title order-no",children:"Approval"})}),(0,te.jsxs)("div",{className:"brv-popup__content",children:[(0,te.jsxs)("p",{className:"popup-message",children:["Approved to :",(0,M.VE)(m)]}),d&&(0,te.jsx)("p",{className:"popup-message",style:{color:"#c0c0c0"},children:"loading..."})]}),(0,te.jsx)("div",{className:"brv-popup__bottom",children:(0,te.jsx)(W.Z,{disabled:d,color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:function(){!function(e){k.apply(this,arguments)}(b)},style:{maxWidth:"600px"},children:"Confirm Approval"})})]})]})};function ce(e){e.hash;var t=e.txTimeoutSeconds,n=void 0===t?8:t,o=(0,V.useState)(n),r=(0,$.Z)(o,2),a=r[0],i=r[1];return(0,V.useEffect)((function(){var e=J()((function(){i((function(e){return e>1?e-1:e}))}),1e3);return function(){window.clearInterval(e)}}),[]),(0,te.jsxs)("p",{children:[(0,te.jsx)("span",{children:"Transaction packing. This will go back to list after"}),(0,te.jsx)("span",{style:{color:"#dc7548",paddingLeft:"0.2em",paddingRight:"0.2em"},children:a}),"seconds."]})}function de(e,t){var n=c()(e);if(u()){var o=u()(e);t&&(o=B()(o).call(o,(function(t){return f()(e,t).enumerable}))),n.push.apply(n,o)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n,o=null!=arguments[t]?arguments[t]:{};if(t%2)v()(n=de(Object(o),!0)).call(n,(function(t){(0,k.Z)(e,t,o[t])}));else if(x())j()(e,x()(o));else{var r;v()(r=de(Object(o))).call(r,(function(t){g()(e,t,f()(o,t))}))}}return e}function pe(e){var t=function(){if("undefined"==typeof Reflect||!s())return!1;if(s().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,C.Z)(e);if(t){var r=(0,C.Z)(this).constructor;n=s()(o,arguments,r)}else n=o.apply(this,arguments);return(0,T.Z)(this,n)}}var fe=function(e){(0,N.Z)(n,e);var t=pe(n);function n(e){var o;return(0,Z.Z)(this,n),(o=t.call(this,e)).state={detail:{}},o}return(0,_.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.poolList,o=void 0===n?[]:n,r=e.orderList,a=void 0===r?[]:r,i=e.asynPreCheckTxState,s=t.state,l=void 0===s?{}:s;if(l.poolAddress){var c=A()(o).call(o,(function(e){return e.poolAddress===l.poolAddress}));if(c){var d=B()(a).call(a,(function(e){return e.poolAddress===l.poolAddress}));this.setState({detail:ue(ue({},c),{},{orderCount:d?d.length:0})})}}i&&i()}},{key:"componentWillUnmount",value:function(){}},{key:"renderContent",value:function(){var e,t=this.props,n=(t.location,t.isMobile),o=t.isBrowser,r=(t.isImToken,t.hopBalanceValt,t.ethBalanceValt),a=(t.allowanceValt,t.needApprove),i=this.state.detail||{},s=i.poolName,l=i.poolAddress,c=(i.url,i.email),d=(i.lockAmount,i.owner,i.orderCount),u=(0,M.Rt)("brv-card",{isMobile:n,isBrowser:o});return(0,te.jsx)("div",{className:"pool-detail__content",children:(0,te.jsxs)(y.Z,{headerClassName:"brv-card-title",title:s,className:u,children:[(0,te.jsxs)("div",{className:"brv-form",children:[(0,te.jsx)(L.a,{labelBox:!0,labelText:"Pool address",labelValue:(0,M.VE)(l)}),(0,te.jsx)(L.a,{labelBox:!0,labelText:"Status",valtColor:d>0?"#DC7548":"#48474A",labelValue:d>0?E()(e="Has ".concat(d," ")).call(e,d>1?"receipts":"receipt"," "):"No Deposit"}),(0,te.jsx)(L.a,{labelBox:!0,labelText:"Email",labelValue:c})]}),(0,te.jsx)("div",{className:"brv-card__footer",children:a?(0,te.jsx)(le,{ethBalanceValt:r}):(0,te.jsx)(oe,{poolName:s,poolAddress:l})})]})})}},{key:"render",value:function(){var e=this.props,t=e.isBrowser,n=(e.isImToken,e.isMobile);return(0,te.jsxs)("div",{className:"pool-detail",children:[t&&(0,te.jsx)(I.N,{navTitle:"Pool Details"}),this.renderContent(),n&&(0,te.jsx)(I.q,{})]})}}]),n}(V.Component),he=n(27556);const ve=(0,o.qC)(a.EN,(0,r.$j)((function(e){var t=e.skinState,n=t.isMobile,o=t.isBrowser,r=t.isImToken,a=e.poolState.poolList,i=void 0===a?[]:a,s=e.orderState.orderList,l=void 0===s?[]:s,c=e.dappState,d=c.selectedAddress,u=c.hopBalance,p=c.ethBalance,f=c.allowanceWei,h=(0,K.Ck)(f,2),v=(0,K.Ck)(u,2),m=v-h>0||h<=1;return{isMobile:n,isBrowser:o,isImToken:r,poolList:i,hopBalanceValt:v,ethBalanceValt:(0,K.Ck)(p,6),allowanceValt:h,needApprove:m,selectedAddress:d,orderList:l}}),(function(e){return{asynPreCheckTxState:function(){(0,he.M)().then((function(t){e((0,ie.X4)(t))})).catch((function(e){}))}}})))(fe)},13082:(e,t,n)=>{n.d(t,{Z:()=>T});var o=n(14890),r=n(82100),a=n(16550),i=n(13535),s=n.n(i),l=n(68420),c=n(27344),d=n(84441),u=n(3020),p=n(3362),f=n(67294),h=n(5562),v=n(95266),m=(n(33938),n(63109),n(30699)),x=n.n(m),b=n(50047),j=n.n(b),w=(n(88066),n(51005)),g=(n(58930),n(81516)),y=n(69039),k=n(85893);function Z(e){var t=(0,a.k6)(),n=(0,r.v9)((function(e){var t;return x()(t=e.poolState.poolList||[]).call(t,(function(e){return!e.invalid}))})),o=(0,f.useState)([]),i=(0,v.Z)(o,2),s=(i[0],i[1],(0,f.useState)(!0)),l=(0,v.Z)(s,2);l[0],l[1];function c(e){var n={pathname:(0,y.ZP)(y.k$,y.r2),state:{poolAddress:e}};e&&t.push(n)}return(0,k.jsx)("div",{className:"pool-list__container",children:(0,k.jsx)(h.Z,{className:"pool-list",mode:"default",children:j()(n).call(n,(function(e,t){return(0,k.jsxs)(h.Z.Item,{className:"pool-list-item pool-list-item__back".concat(t%3),extra:(0,k.jsx)("button",{className:"pool-list__actions-btn",onClick:function(){c(e.poolAddress)},children:"Deposit"}),arrow:(0,k.jsx)(w.Z,{onClick:function(){c(e.poolAddress)}}),children:[(0,k.jsx)("div",{className:"pool-item__title",children:(0,k.jsx)("span",{children:e.poolName})}),(0,k.jsx)("div",{className:"pool-item__address",children:(0,k.jsx)("span",{className:"address",children:(0,g.VE)(e.poolAddress,16)})})]},"pool_item_".concat(t))}))})})}function _(e){var t=function(){if("undefined"==typeof Reflect||!s())return!1;if(s().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=s()(o,arguments,r)}else n=o.apply(this,arguments);return(0,u.Z)(this,n)}}var N=function(e){(0,d.Z)(n,e);var t=_(n);function n(e){var o;return(0,l.Z)(this,n),(o=t.call(this,e)).state={},o}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.poolList,t=void 0===e?[]:e;return(0,k.jsx)("div",{className:"pool-page",children:(0,k.jsx)(Z,{poolList:t})})}}]),n}(f.Component);const T=(0,o.qC)(a.EN,(0,r.$j)((function(e){return{isMobile:e.skinState.isMobile,initialized:e.dappState.initialized,poolList:e.poolState.poolList}}),(function(e){return{}})))(N)},99068:(e,t,n)=>{n.d(t,{m:()=>p});var o=n(95266),r=n(42825),a=n.n(r),i=n(67294),s=n(16550),l=n(9669),c=n.n(l),d=n(85893),u=n(25108);function p(e){(0,s.k6)();var t="http://ninja.baschain.cc/pool/0xd8a11716156af950E5Ff6FC62B41733516A28c9C",n=(0,i.useState)(""),r=(0,o.Z)(n,2),l=r[0],p=r[1];return(0,i.useEffect)((function(){u.log(">>>>>>>>>>>>>>>>>>>"),c().get(t).then((function(e){u.log("RESP>>>>>>>>>",e),200===e.status&&e.data&&p(a()(e.data))})).catch((function(e){u.log("Error:>>>>>>>>>",e),p(e.message)}))}),[]),(0,d.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,d.jsx)("h1",{children:"API TEST"}),(0,d.jsx)("p",{className:"url",children:t}),(0,d.jsx)("div",{className:"data-json",children:(0,d.jsx)("p",{style:{wordBreak:"break-all"},children:l})})]})}}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=t,o.amdO={},e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],s=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.p="/",(()=>{var e={6855:0,8097:0,1022:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(l)var d=l(o)}for(t&&t(n);c<i.length;c++)a=i[c],o.o(e,a)&&e[a]&&e[a][0](),e[i[c]]=0;return o.O(d)},n=self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[5342,8097,3149,9809,4170,9669,3036,3550,738,3982,8815,8764,9244,6367,4132,1820,3659,782,1789,2354,8686,705,4008,6371,2751,361,3642,1617,8937,2832,2462,7125,3900,3533,4006,1405,1496,3614,6159,4227,3846,8965,6255,7235,7017,6043,2799,5033,7073,3455,7735,4075,4448,8865,1713,9759,4928,6297,8468,5459,5220,3493,5519,2113,6770,6083,8575,3865,9337,2594,742,1692,9321,7292,2390,4532,5669,4673,8838,2756,1022,1592,6504],(()=>o(62976)));r=o.O(r)})();