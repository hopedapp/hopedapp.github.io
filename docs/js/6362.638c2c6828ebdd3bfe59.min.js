"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[6362],{98623:(e,t,n)=>{n.d(t,{Z:()=>ue});var o=n(14890),r=n(82100),a=n(16550),s=n(13535),i=n.n(s),l=n(89356),c=n.n(l),u=n(63263),p=n.n(u),d=n(58377),f=n.n(d),h=n(28834),v=n.n(h),m=n(13038),x=n.n(m),b=n(32752),k=n.n(b),j=n(44341),y=n.n(j),Z=n(56655),N=n(44845),C=n(68420),w=n(27344),g=n(84441),_=n(3020),A=n(3362),S=n(98882),B=n.n(S),T=n(30699),P=n.n(T),E=n(88066),V=n.n(E),L=n(67294),M=n(48168),D=n(81516),I=n(66416),R=n(93806),W=n(5562),z=n(3771),H=n(28195),O=n(82240),F=n(33938),$=n(95266),q=n(63109),U=n.n(q),G=n(21052),X=n.n(G),Y=(n(54579),n(41231)),J=n(3354),K=n(67126),Q=n(85893),ee=(n(25108),function(e){var t=e.poolAddress,n=e.poolName,o=e.tsSecond,s=void 0===o?6:o,i=(0,a.k6)(),l=(0,r.v9)((function(e){return e.dappState})),c=l.hopBalance,u=l.selectedAddress,p=void 0===u?"":u,d=(l.hasEthereum,(0,Y.Ck)(c,0)),f=(0,L.useState)(""),h=(0,$.Z)(f,2),v=h[0],m=h[1],x=(0,L.useState)(!1),b=(0,$.Z)(x,2),k=b[0],j=b[1],y=(0,L.useState)(!1),Z=(0,$.Z)(y,2),N=Z[0],C=Z[1];function w(){return(w=(0,F.Z)(U().mark((function e(){var n,o;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=g(v),e.next=4,(0,J.cy)(t,n,p);case 4:o=e.sent,C(!0),o.send({from:p}).on("transactionHash",(function(e){var t;C(!0),O.Z.show({icon:"loading",content:V()(t="Transaction [".concat(e,"] packing.This will go back to list after ")).call(t,s," seconds."),duration:1e3*s,afterClose:function(){C(!1),j(!1),i.push("/pool")}})})).on("error",(function(e,t){e&&4001===e.code?O.Z.show({icon:"fail",content:e&&e.message?e.message:"Deposit Fail.",duration:3e3,afterClose:function(){C(!1)}}):e&&!e.code?O.Z.show({icon:"fail",content:e&&e.message?e.message:"Deposit Fail.",duration:1e3*s,afterClose:function(){C(!1),j(!1)}}):(C(!1),j(!1))})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),C(!1),O.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Deposit Fail.",duration:3e3});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function g(e){if(!/^[0-9]+(.[0-9]+)?$/.test(e))throw new Error("Please enter HOP amount ");if(Number(e)-d>0)throw m(d),new Error("This account only has ".concat(d," HOP"));return X()(e)}return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(H.Z,{color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:(0,F.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,K.Wf)();case 3:j(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),O.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Please use it in the ImToken app",duration:4e3});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),style:{maxWidth:"600px"},children:"Deposit"}),(0,Q.jsxs)(R.Z,{visible:k,position:"bottom",onMaskClick:function(){return!N&&j(!1)},bodyClassName:"brv-popup__body",bodyStyle:{minHeight:"35vh",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:[(0,Q.jsx)("div",{className:"brv-popup__title",children:(0,Q.jsx)("span",{className:"popup-title order-no",children:n})}),(0,Q.jsx)("div",{className:"brv-popup__content",children:(0,Q.jsx)(W.Z,{style:{"--prefix-width":"6em","--font-size":"14px"},children:(0,Q.jsx)(W.Z.Item,{className:"brv-form-listitem",prefix:(0,Q.jsx)("label",{className:"brv-input-label",style:{fontSize:"16px",fontWeight:"bold",color:"#9A999C",textAlign:"right"},children:"HOP:"}),children:(0,Q.jsx)(z.Z,{placeholder:"Maximum ".concat(d," HOP"),value:v,onChange:function(e){m(e)},clearable:!0,disabled:N,style:{"--font-size":"14px"}})})})}),(0,Q.jsx)("div",{className:"brv-popup__bottom",children:(0,Q.jsx)(H.Z,{disabled:N,color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:function(){return w.apply(this,arguments)},style:{maxWidth:"600px"},children:"Confirm"})})]})]})}),te=n(44371),ne=n(44426),oe=n(25108),re=function(e){var t=(0,L.useState)(!1),n=(0,$.Z)(t,2),o=n[0],a=n[1],s=(0,L.useState)(!1),i=(0,$.Z)(s,2),l=i[0],c=i[1],u=e.ethBalanceValt,p=void 0===u?0:u,d=(0,r.v9)((function(e){return e.dappState})),f=d.currDepositAddress,h=void 0===f?"":f,v=d.selectedAddress,m=void 0===v?"":v,x=(0,r.I0)(),b=function(){var e=(0,F.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,K.Wf)();case 3:if(!(p<K.AY)){e.next=5;break}throw new Error("Insufficient Gas fees");case 5:a(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Please use it in the ImToken app",duration:4e3});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();function k(){return k=(0,F.Z)(U().mark((function e(t){var n,o,r,s,i;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return O.Z.show({icon:"fail",content:"No account connected",duration:3e3}),e.abrupt("return");case 5:return c(!0),e.prev=6,e.next=9,(0,te.gC)(t);case 9:n=e.sent,c(!1),o=n.status,r=n.blockNumber,Boolean(o)||r?(s=(0,te._i)(),O.Z.show({icon:"success",content:"Approve Completed",duration:1500}),a(!1),x((0,ne.cN)(s))):(O.Z.show({content:"Approve fail,try again",duration:1500}),a(!1)),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(6),c(!1),i=e.t0&&e.t0.code?e.t0.code:"",oe.log("Approved fail:",e.t0),O.Z.show({icon:"fail",content:"Approve error ".concat(i),duration:4e3});case 21:case"end":return e.stop()}}),e,null,[[6,15]])}))),k.apply(this,arguments)}return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(H.Z,{color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:b,style:{maxWidth:"600px"},children:"Approve"}),(0,Q.jsxs)(R.Z,{visible:o,position:"bottom",onMaskClick:function(){return!l&&a(!1)},bodyClassName:"brv-popup__body",bodyStyle:{minHeight:"35vh",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:[(0,Q.jsx)("div",{className:"brv-popup__title",children:(0,Q.jsx)("span",{className:"popup-title order-no",children:"Approval"})}),(0,Q.jsxs)("div",{className:"brv-popup__content",children:[(0,Q.jsxs)("p",{className:"popup-message",children:["Approved to :",(0,D.VE)(h)]}),l&&(0,Q.jsx)("p",{className:"popup-message",style:{color:"#c0c0c0"},children:"loading..."})]}),(0,Q.jsx)("div",{className:"brv-popup__bottom",children:(0,Q.jsx)(H.Z,{disabled:l,color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:function(){!function(e){k.apply(this,arguments)}(m)},style:{maxWidth:"600px"},children:"Confirm Approval"})})]})]})};function ae(e,t){var n=c()(e);if(p()){var o=p()(e);t&&(o=P()(o).call(o,(function(t){return f()(e,t).enumerable}))),n.push.apply(n,o)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n,o=null!=arguments[t]?arguments[t]:{};if(t%2)v()(n=ae(Object(o),!0)).call(n,(function(t){(0,N.Z)(e,t,o[t])}));else if(x())k()(e,x()(o));else{var r;v()(r=ae(Object(o))).call(r,(function(t){y()(e,t,f()(o,t))}))}}return e}function ie(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,A.Z)(e);if(t){var r=(0,A.Z)(this).constructor;n=i()(o,arguments,r)}else n=o.apply(this,arguments);return(0,_.Z)(this,n)}}var le=function(e){(0,g.Z)(n,e);var t=ie(n);function n(e){var o;return(0,C.Z)(this,n),(o=t.call(this,e)).state={detail:{}},o}return(0,w.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.poolList,o=void 0===n?[]:n,r=e.orderList,a=void 0===r?[]:r,s=e.asynPreCheckTxState,i=t.state,l=void 0===i?{}:i;if(l.poolAddress){var c=B()(o).call(o,(function(e){return e.poolAddress===l.poolAddress}));if(c){var u=P()(a).call(a,(function(e){return e.poolAddress===l.poolAddress}));this.setState({detail:se(se({},c),{},{orderCount:u?u.length:0})})}}s&&s()}},{key:"componentWillUnmount",value:function(){}},{key:"renderContent",value:function(){var e,t=this.props,n=(t.location,t.isMobile),o=t.isBrowser,r=(t.isImToken,t.hopBalanceValt,t.ethBalanceValt),a=(t.allowanceValt,t.needApprove),s=this.state.detail||{},i=s.poolName,l=s.poolAddress,c=(s.url,s.email),u=(s.lockAmount,s.owner,s.orderCount),p=(0,D.Rt)("brv-card",{isMobile:n,isBrowser:o});return(0,Q.jsx)("div",{className:"pool-detail__content",children:(0,Q.jsxs)(Z.Z,{headerClassName:"brv-card-title",title:i,className:p,children:[(0,Q.jsxs)("div",{className:"brv-form",children:[(0,Q.jsx)(M.a,{labelBox:!0,labelText:"Pool address",labelValue:(0,D.VE)(l)}),(0,Q.jsx)(M.a,{labelBox:!0,labelText:"Status",valtColor:u>0?"#DC7548":"#48474A",labelValue:u>0?V()(e="Has ".concat(u," ")).call(e,u>1?"receipts":"receipt"," "):"No Deposit"}),(0,Q.jsx)(M.a,{labelBox:!0,labelText:"Email",labelValue:c})]}),(0,Q.jsx)("div",{className:"brv-card__footer",children:a?(0,Q.jsx)(re,{ethBalanceValt:r}):(0,Q.jsx)(ee,{poolName:i,poolAddress:l})})]})})}},{key:"render",value:function(){var e=this.props,t=e.isBrowser,n=(e.isImToken,e.isMobile);return(0,Q.jsxs)("div",{className:"pool-detail",children:[t&&(0,Q.jsx)(I.N,{navTitle:"Pool Details"}),this.renderContent(),n&&(0,Q.jsx)(I.q,{})]})}}]),n}(L.Component),ce=n(27556);const ue=(0,o.qC)(a.EN,(0,r.$j)((function(e){var t=e.skinState,n=t.isMobile,o=t.isBrowser,r=t.isImToken,a=e.poolState.poolList,s=void 0===a?[]:a,i=e.orderState.orderList,l=void 0===i?[]:i,c=e.dappState,u=c.selectedAddress,p=c.hopBalance,d=c.ethBalance,f=c.allowanceWei,h=(0,Y.Ck)(f,2),v=(0,Y.Ck)(p,2),m=v-h>0||h<=1;return{isMobile:n,isBrowser:o,isImToken:r,poolList:s,hopBalanceValt:v,ethBalanceValt:(0,Y.Ck)(d,6),allowanceValt:h,needApprove:m,selectedAddress:u,orderList:l}}),(function(e){return{asynPreCheckTxState:function(){(0,ce.M)().then((function(t){e((0,ne.X4)(t))})).catch((function(e){}))}}})))(le)},13082:(e,t,n)=>{n.d(t,{Z:()=>_});var o=n(14890),r=n(82100),a=n(16550),s=n(13535),i=n.n(s),l=n(68420),c=n(27344),u=n(84441),p=n(3020),d=n(3362),f=n(67294),h=n(5562),v=n(95266),m=(n(33938),n(63109),n(30699)),x=n.n(m),b=n(50047),k=n.n(b),j=(n(88066),n(51005)),y=(n(58930),n(81516)),Z=n(69039),N=n(85893);function C(e){var t=(0,a.k6)(),n=(0,r.v9)((function(e){var t;return x()(t=e.poolState.poolList||[]).call(t,(function(e){return!e.invalid}))})),o=(0,f.useState)([]),s=(0,v.Z)(o,2),i=(s[0],s[1],(0,f.useState)(!0)),l=(0,v.Z)(i,2);l[0],l[1];function c(e){var n={pathname:(0,Z.ZP)(Z.k$,Z.r2),state:{poolAddress:e}};e&&t.push(n)}return(0,N.jsx)("div",{className:"pool-list__container",children:(0,N.jsx)(h.Z,{className:"pool-list",mode:"default",children:k()(n).call(n,(function(e,t){return(0,N.jsxs)(h.Z.Item,{className:"pool-list-item pool-list-item__back".concat(t%3),extra:(0,N.jsx)("button",{className:"pool-list__actions-btn",onClick:function(){c(e.poolAddress)},children:"Deposit"}),arrow:(0,N.jsx)(j.Z,{onClick:function(){c(e.poolAddress)}}),children:[(0,N.jsx)("div",{className:"pool-item__title",children:(0,N.jsx)("span",{children:e.poolName})}),(0,N.jsx)("div",{className:"pool-item__address",children:(0,N.jsx)("span",{className:"address",children:(0,y.VE)(e.poolAddress,16)})})]},"pool_item_".concat(t))}))})})}function w(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,d.Z)(e);if(t){var r=(0,d.Z)(this).constructor;n=i()(o,arguments,r)}else n=o.apply(this,arguments);return(0,p.Z)(this,n)}}var g=function(e){(0,u.Z)(n,e);var t=w(n);function n(e){var o;return(0,l.Z)(this,n),(o=t.call(this,e)).state={},o}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.poolList,t=void 0===e?[]:e;return(0,N.jsx)("div",{className:"pool-page",children:(0,N.jsx)(C,{poolList:t})})}}]),n}(f.Component);const _=(0,o.qC)(a.EN,(0,r.$j)((function(e){return{isMobile:e.skinState.isMobile,initialized:e.dappState.initialized,poolList:e.poolState.poolList}}),(function(e){return{}})))(g)},99068:(e,t,n)=>{n.d(t,{m:()=>d});var o=n(95266),r=n(42825),a=n.n(r),s=n(67294),i=n(16550),l=n(9669),c=n.n(l),u=n(85893),p=n(25108);function d(e){(0,i.k6)();var t="http://ninja.baschain.cc/pool/0xd8a11716156af950E5Ff6FC62B41733516A28c9C",n=(0,s.useState)(""),r=(0,o.Z)(n,2),l=r[0],d=r[1];return(0,s.useEffect)((function(){p.log(">>>>>>>>>>>>>>>>>>>"),c().get(t).then((function(e){p.log("RESP>>>>>>>>>",e),200===e.status&&e.data&&d(a()(e.data))})).catch((function(e){p.log("Error:>>>>>>>>>",e),d(e.message)}))}),[]),(0,u.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,u.jsx)("h1",{children:"API TEST"}),(0,u.jsx)("p",{className:"url",children:t}),(0,u.jsx)("div",{className:"data-json",children:(0,u.jsx)("p",{style:{wordBreak:"break-all"},children:l})})]})}}}]);