(()=>{"use strict";var e,t={98623:(e,t,n)=>{n.d(t,{Z:()=>me});var o=n(33938),r=n(63109),a=n.n(r),s=n(14890),i=n(82100),l=n(16550),c=n(13535),d=n.n(c),u=n(89356),p=n.n(u),f=n(63263),v=n.n(f),h=n(58377),m=n.n(h),x=n(28834),b=n.n(x),w=n(13038),g=n.n(w),j=n(32752),y=n.n(j),k=n(44341),Z=n.n(k),A=n(56655),_=n(44845),N=n(68420),C=n(27344),T=n(84441),S=n(3020),P=n(3362),B=n(98882),O=n.n(B),E=n(30699),L=n.n(E),M=n(88066),V=n.n(M),R=n(67294),D=n(48168),I=n(81516),W=n(66416),z=n(93806),F=n(5562),H=n(3771),$=n(28195),q=n(82240),U=n(95266),Q=n(21052),X=n.n(Q),Y=n(96019),G=n.n(Y),J=n(41231),K=n(3354),ee=n(67126),te=n(85893),ne=n(25108),oe=function(e){var t=e.poolAddress,n=e.poolName,r=e.tsSecond,s=void 0===r?6:r,c=(0,l.k6)(),d=(0,i.v9)((function(e){return e.dappState})),u=d.hopBalance,p=d.selectedAddress,f=void 0===p?"":p,v=(d.hasEthereum,d.txTimeoutSeconds),h=void 0===v?8:v,m=(0,J.Ck)(u,0),x=(0,R.useState)(""),b=(0,U.Z)(x,2),w=b[0],g=b[1],j=(0,R.useState)(!1),y=(0,U.Z)(j,2),k=y[0],Z=y[1],A=(0,R.useState)(!1),_=(0,U.Z)(A,2),N=_[0],C=_[1];function T(){return(T=(0,o.Z)(a().mark((function e(){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=S(w),e.next=4,(0,K.cy)(t,n,f);case 4:o=e.sent,C(!0),o.send({from:f}).on("transactionHash",(function(e){C(!0),q.Z.show({icon:"loading",content:(0,te.jsx)(re,{hash:e,txTimeoutSeconds:h}),duration:1e3*h,afterClose:function(){C(!1),Z(!1),c.push("/pool")}})})).on("error",(function(e,t){ne.log(">>>>>>>>Deposited>>>>>",e),e&&4001===e.code?q.Z.show({icon:"fail",content:e&&e.message?e.message:"Deposit Fail.",duration:3e3,afterClose:function(){C(!1)}}):e&&!e.code?q.Z.show({icon:"fail",content:e&&e.message?e.message:"Deposit Fail.",duration:1e3*s,afterClose:function(){C(!1),Z(!1)}}):(C(!1),Z(!1))})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),C(!1),q.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Deposit Fail.",duration:3e3});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function S(e){if(!/^[0-9]+(.[0-9]+)?$/.test(e))throw new Error("Please enter HOP amount ");if(Number(e)-m>0)throw g(m),new Error("This account only has ".concat(m," HOP"));return X()(e)}return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)($.Z,{color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ee.Wf)();case 3:Z(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),q.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Please use it in the ImToken app",duration:4e3});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),style:{maxWidth:"600px"},children:"Deposit"}),(0,te.jsxs)(z.Z,{visible:k,position:"bottom",onMaskClick:function(){return!N&&Z(!1)},bodyClassName:"brv-popup__body",bodyStyle:{minHeight:"35vh",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:[(0,te.jsx)("div",{className:"brv-popup__title",children:(0,te.jsx)("span",{className:"popup-title order-no",children:n})}),(0,te.jsx)("div",{className:"brv-popup__content",children:(0,te.jsx)(F.Z,{style:{"--prefix-width":"6em","--font-size":"14px"},children:(0,te.jsx)(F.Z.Item,{className:"brv-form-listitem",prefix:(0,te.jsx)("label",{className:"brv-input-label",style:{fontSize:"16px",fontWeight:"bold",color:"#9A999C",textAlign:"right"},children:"HOP:"}),children:(0,te.jsx)(H.Z,{placeholder:"Maximum ".concat(m," HOP"),value:w,onChange:function(e){g(e)},clearable:!0,disabled:N,style:{"--font-size":"14px"}})})})}),(0,te.jsx)("div",{className:"brv-popup__bottom",children:(0,te.jsx)($.Z,{disabled:N,color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:function(){return T.apply(this,arguments)},style:{maxWidth:"600px"},children:"Confirm"})})]})]})};function re(e){e.hash;var t=e.txTimeoutSeconds,n=void 0===t?8:t,o=(0,R.useState)(n),r=(0,U.Z)(o,2),a=r[0],s=r[1];return(0,R.useEffect)((function(){var e=G()((function(){s((function(e){return e>1?e-1:e}))}),1e3);return function(){window.clearInterval(e)}}),[]),(0,te.jsxs)("p",{children:[(0,te.jsx)("span",{children:"Transaction packing. This will go back to list after"}),(0,te.jsx)("span",{style:{color:"#dc7548",paddingLeft:"0.2em",paddingRight:"0.2em"},children:a}),"seconds."]})}var ae=n(44371),se=n(44426),ie=n(25108),le=function(e){var t=(0,l.k6)(),n=(0,R.useState)(!1),r=(0,U.Z)(n,2),s=r[0],c=r[1],d=(0,R.useState)(!1),u=(0,U.Z)(d,2),p=u[0],f=u[1],v=(e.ethBalanceValt,(0,i.v9)((function(e){return e.dappState}))),h=v.currDepositAddress,m=void 0===h?"":h,x=v.selectedAddress,b=void 0===x?"":x,w=v.txTimeoutSeconds,g=void 0===w?8:w,j=(0,i.I0)(),y=function(){var e=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ee.Wf)();case 3:c(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),q.Z.show({icon:"fail",content:e.t0&&e.t0.message?e.t0.message:"Please use it in the ImToken app",duration:4e3});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();function k(){return k=(0,o.Z)(a().mark((function e(n){var o,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return q.Z.show({icon:"fail",content:"No account connected",duration:3e3}),e.abrupt("return");case 5:return f(!0),e.prev=6,e.next=9,(0,ae.LY)(n);case 9:o=e.sent,delete window._isApproveTxTimeouted,delete window._txApprovePending,o.send({from:n}).on("transactionHash",(function(e){var n;V()(n="Transaction [".concat(e,"] packing. This will go back to list after ")).call(n,g," seconds.");window._txApprovePending=!0,q.Z.show({icon:"loading",content:(0,te.jsx)(ce,{hash:e,txTimeoutSeconds:g}),duration:1e3*X()(g),afterClose:function(){f(!1),c(!1),!0===window._txApprovePending&&(window._isApproveTxTimeouted=!0,delete window._txApprovePending,t.push("/pool"))}})})).on("receipt",(function(e){if(delete window._txApprovePending,e&&e.status&&e.events){var t=e.events.Approval,n=void 0===t?{}:t,o=n.returnValues&&n.returnValues.value?n.returnValues.value:"0";o&&"0"!==o&&j((0,se.cN)(o))}void 0===window._isApproveTxTimeouted&&(delete window._isApproveTxTimeouted,q.Z.clear(),f(!1),c(!1))})).on("error",(function(e,t){q.Z.clear(),delete window._txApprovePending,delete window._isApproveTxTimeouted,e&&4001===e.code?q.Z.show({icon:"fail",content:e.message||"Approved fail.",duration:3e3,afterClose:function(){f(!1)}}):q.Z.show({icon:"fail",content:e&&e.message?e.message:"Approved Fail.",duration:4e3,afterClose:function(){f(!1),c(!1)}})})),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(6),f(!1),r=e.t0&&e.t0.message?e.t0.message:"",ie.log("Approved fail:",e.t0),q.Z.show({icon:"fail",content:"Approve error ".concat(r),duration:3e3});case 21:case"end":return e.stop()}}),e,null,[[6,15]])}))),k.apply(this,arguments)}return(0,R.useEffect)((function(){return function(){}}),[]),(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)($.Z,{color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:y,style:{maxWidth:"600px"},children:"Approve"}),(0,te.jsxs)(z.Z,{visible:s,position:"bottom",onMaskClick:function(){return!p&&c(!1)},bodyClassName:"brv-popup__body",bodyStyle:{minHeight:"35vh",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"},children:[(0,te.jsx)("div",{className:"brv-popup__title",children:(0,te.jsx)("span",{className:"popup-title order-no",children:"Approval"})}),(0,te.jsxs)("div",{className:"brv-popup__content",children:[(0,te.jsxs)("p",{className:"popup-message",children:["Approved to :",(0,I.VE)(m)]}),p&&(0,te.jsx)("p",{className:"popup-message",style:{color:"#c0c0c0"},children:"loading..."})]}),(0,te.jsx)("div",{className:"brv-popup__bottom",children:(0,te.jsx)($.Z,{disabled:p,color:"primary",size:"small",className:"brv-btn brv-btn-round",onClick:function(){!function(e){k.apply(this,arguments)}(b)},style:{maxWidth:"600px"},children:"Confirm Approval"})})]})]})};function ce(e){e.hash;var t=e.txTimeoutSeconds,n=void 0===t?8:t,o=(0,R.useState)(n),r=(0,U.Z)(o,2),a=r[0],s=r[1];return(0,R.useEffect)((function(){var e=G()((function(){s((function(e){return e>1?e-1:e}))}),1e3);return function(){window.clearInterval(e)}}),[]),(0,te.jsxs)("p",{children:[(0,te.jsx)("span",{children:"Transaction packing. This will go back to list after"}),(0,te.jsx)("span",{style:{color:"#dc7548",paddingLeft:"0.2em",paddingRight:"0.2em"},children:a}),"seconds."]})}function de(e,t){var n=p()(e);if(v()){var o=v()(e);t&&(o=L()(o).call(o,(function(t){return m()(e,t).enumerable}))),n.push.apply(n,o)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n,o=null!=arguments[t]?arguments[t]:{};if(t%2)b()(n=de(Object(o),!0)).call(n,(function(t){(0,_.Z)(e,t,o[t])}));else if(g())y()(e,g()(o));else{var r;b()(r=de(Object(o))).call(r,(function(t){Z()(e,t,m()(o,t))}))}}return e}function pe(e){var t=function(){if("undefined"==typeof Reflect||!d())return!1;if(d().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(d()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,P.Z)(e);if(t){var r=(0,P.Z)(this).constructor;n=d()(o,arguments,r)}else n=o.apply(this,arguments);return(0,S.Z)(this,n)}}var fe=function(e){(0,T.Z)(n,e);var t=pe(n);function n(e){var o;return(0,N.Z)(this,n),(o=t.call(this,e)).state={detail:{}},o}return(0,C.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.poolList,o=void 0===n?[]:n,r=e.orderList,a=void 0===r?[]:r,s=e.asynPreCheckTxState,i=e.asyncRefreshApproval,l=e.selectedAddress,c=t.state,d=void 0===c?{}:c;if(d.poolAddress){var u=O()(o).call(o,(function(e){return e.poolAddress===d.poolAddress}));if(u){var p=L()(a).call(a,(function(e){return e.poolAddress===d.poolAddress}));this.setState({detail:ue(ue({},u),{},{orderCount:p?p.length:0})})}}s&&s(),i&&i(l)}},{key:"componentWillUnmount",value:function(){}},{key:"renderContent",value:function(){var e,t=this.props,n=t.isMobile,o=t.isBrowser,r=t.ethBalanceValt,a=t.allowanceWei,s=t.hopBalance,i=t.needApproval,l=this.state.detail||{},c=l.poolName,d=l.poolAddress,u=(l.url,l.email),p=(l.lockAmount,l.owner,l.orderCount),f=(0,I.Rt)("brv-card",{isMobile:n,isBrowser:o}),v=i(a,s);return(0,te.jsx)("div",{className:"pool-detail__content",children:(0,te.jsxs)(A.Z,{headerClassName:"brv-card-title",title:c,className:f,children:[(0,te.jsxs)("div",{className:"brv-form",children:[(0,te.jsx)(D.a,{labelBox:!0,labelText:"Pool address",labelValue:(0,I.VE)(d)}),(0,te.jsx)(D.a,{labelBox:!0,labelText:"Status",valtColor:p>0?"#DC7548":"#48474A",labelValue:p>0?V()(e="Has ".concat(p," ")).call(e,p>1?"receipts":"receipt"," "):"No Deposit"}),(0,te.jsx)(D.a,{labelBox:!0,labelText:"Email",labelValue:u})]}),(0,te.jsx)("div",{className:"brv-card__footer",children:v?(0,te.jsx)(le,{ethBalanceValt:r}):(0,te.jsx)(oe,{poolName:c,poolAddress:d})})]})})}},{key:"render",value:function(){var e=this.props,t=e.isBrowser,n=(e.isImToken,e.isMobile);return(0,te.jsxs)("div",{className:"pool-detail",children:[t&&(0,te.jsx)(W.N,{navTitle:"Pool Details"}),this.renderContent(),n&&(0,te.jsx)(W.q,{})]})}}]),n}(R.Component),ve=n(27556),he=n(25108);const me=(0,s.qC)(l.EN,(0,i.$j)((function(e){var t=e.skinState,n=t.isMobile,o=t.isBrowser,r=t.isImToken,a=e.poolState.poolList,s=void 0===a?[]:a,i=e.orderState.orderList,l=void 0===i?[]:i,c=e.dappState,d=c.selectedAddress,u=c.hopBalance,p=c.ethBalance,f=c.allowanceWei,v=(0,J.Ck)(f,2),h=(0,J.Ck)(u,2),m=h-v>0||v<=1;return{isMobile:n,isBrowser:o,isImToken:r,poolList:s,hopBalance:u,allowanceWei:f,hopBalanceValt:h,ethBalanceValt:(0,J.Ck)(p,6),allowanceValt:v,needApprove:m,selectedAddress:d,orderList:l}}),(function(e){return{needApproval:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return he.log("asset aprrove>>>>>",(0,J.Ck)(e,2)-1e3),(0,J.Ck)(e,2)-1e3<0},asynPreCheckTxState:function(){(0,ve.M)().then((function(t){he.log(">>>>>>>>>>>>>>>>load tx state>>",t),e((0,se.X4)(t))})).catch((function(e){he.log("init fail:",e)}))},asyncRefreshApproval:(t=(0,o.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ae.u7)(t);case 3:n=e.sent,he.log(">Query allowance for ".concat(t," =>>>>>>>>>>"),n),(0,se.cN)(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),he.log("refresh allowance fail:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e){return t.apply(this,arguments)})};var t})))(fe)},13082:(e,t,n)=>{n.d(t,{Z:()=>N});var o=n(14890),r=n(82100),a=n(16550),s=n(13535),i=n.n(s),l=n(68420),c=n(27344),d=n(84441),u=n(3020),p=n(3362),f=n(67294),v=n(5562),h=n(95266),m=(n(33938),n(63109),n(30699)),x=n.n(m),b=n(50047),w=n.n(b),g=(n(88066),n(51005)),j=(n(58930),n(81516)),y=n(69039),k=n(85893);function Z(e){var t=(0,a.k6)(),n=(0,r.v9)((function(e){var t;return x()(t=e.poolState.poolList||[]).call(t,(function(e){return!e.invalid}))})),o=(0,f.useState)([]),s=(0,h.Z)(o,2),i=(s[0],s[1],(0,f.useState)(!0)),l=(0,h.Z)(i,2);l[0],l[1];function c(e){var n={pathname:(0,y.ZP)(y.k$,y.r2),state:{poolAddress:e}};e&&t.push(n)}return(0,k.jsx)("div",{className:"pool-list__container",children:(0,k.jsx)(v.Z,{className:"pool-list",mode:"default",children:w()(n).call(n,(function(e,t){return(0,k.jsxs)(v.Z.Item,{className:"pool-list-item pool-list-item__back".concat(t%3),extra:(0,k.jsx)("button",{className:"pool-list__actions-btn",onClick:function(){c(e.poolAddress)},children:"Deposit"}),arrow:(0,k.jsx)(g.Z,{onClick:function(){c(e.poolAddress)}}),children:[(0,k.jsx)("div",{className:"pool-item__title",children:(0,k.jsx)("span",{children:e.poolName})}),(0,k.jsx)("div",{className:"pool-item__address",children:(0,k.jsx)("span",{className:"address",children:(0,j.VE)(e.poolAddress,16)})})]},"pool_item_".concat(t))}))})})}function A(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=i()(o,arguments,r)}else n=o.apply(this,arguments);return(0,u.Z)(this,n)}}var _=function(e){(0,d.Z)(n,e);var t=A(n);function n(e){var o;return(0,l.Z)(this,n),(o=t.call(this,e)).state={},o}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.poolList,t=void 0===e?[]:e;return(0,k.jsx)("div",{className:"pool-page",children:(0,k.jsx)(Z,{poolList:t})})}}]),n}(f.Component);const N=(0,o.qC)(a.EN,(0,r.$j)((function(e){return{isMobile:e.skinState.isMobile,initialized:e.dappState.initialized,poolList:e.poolState.poolList}}),(function(e){return{}})))(_)},99068:(e,t,n)=>{n.d(t,{m:()=>p});var o=n(95266),r=n(42825),a=n.n(r),s=n(67294),i=n(16550),l=n(9669),c=n.n(l),d=n(85893),u=n(25108);function p(e){(0,i.k6)();var t="http://ninja.baschain.cc/pool/0xd8a11716156af950E5Ff6FC62B41733516A28c9C",n=(0,s.useState)(""),r=(0,o.Z)(n,2),l=r[0],p=r[1];return(0,s.useEffect)((function(){u.log(">>>>>>>>>>>>>>>>>>>"),c().get(t).then((function(e){u.log("RESP>>>>>>>>>",e),200===e.status&&e.data&&p(a()(e.data))})).catch((function(e){u.log("Error:>>>>>>>>>",e),p(e.message)}))}),[]),(0,d.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,d.jsx)("h1",{children:"API TEST"}),(0,d.jsx)("p",{className:"url",children:t}),(0,d.jsx)("div",{className:"data-json",children:(0,d.jsx)("p",{style:{wordBreak:"break-all"},children:l})})]})}}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=t,o.amdO={},e=[],o.O=(t,n,r,a)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],i=!0,l=0;l<n.length;l++)(!1&a||s>=a)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.p="/",(()=>{var e={6855:0,8097:0,1022:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[s,i,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var d=l(o)}for(t&&t(n);c<s.length;c++)a=s[c],o.o(e,a)&&e[a]&&e[a][0](),e[s[c]]=0;return o.O(d)},n=self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[5342,8097,3149,9809,4170,9669,3036,3550,738,3982,8815,8764,9244,6367,4132,1820,3659,782,1789,2354,8686,705,4008,6371,2751,361,3642,1617,8937,2832,2462,7125,3900,3533,4006,1405,1496,3614,6159,4227,3846,8965,6255,7235,7017,6043,2799,5033,7073,3455,7735,4075,4448,8865,1713,9759,4928,6297,8468,5459,5220,3493,5519,2113,6770,6083,8575,3865,9337,2594,742,1692,9321,7292,2390,4532,5669,4673,8838,2756,1022,1592,6504],(()=>o(62976)));r=o.O(r)})();