"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[1692],{49284:(t,e,n)=>{var o=n(25108),r=n(92928),a=n(93952),s=n(18269),i=n(96602).subscription,c=n(84390).formatters,u=n(84390).errors,p=n(4017),l=n(93338),d=function t(e,n,o){var a=this,i=Array.prototype.slice.call(arguments);if(!(this instanceof t))throw new Error('Please use the "new" keyword to instantiate a web3.eth.Contract() object!');if(this.setProvider=function(){r.packageInit(a,arguments),a.clearSubscriptions=a._requestManager.clearSubscriptions},r.packageInit(this,[this.constructor]),this.clearSubscriptions=this._requestManager.clearSubscriptions,!e||!Array.isArray(e))throw u.ContractMissingABIError();this.options={};var p=i[i.length-1];p&&"object"==typeof p&&!Array.isArray(p)&&(o=p,this.options={...this.options,...this._getOrSetDefaultOptions(o)},n&&"object"==typeof n&&(n=null)),Object.defineProperty(this.options,"address",{set:function(t){t&&(a._address=s.toChecksumAddress(c.inputAddressFormatter(t)))},get:function(){return a._address},enumerable:!0}),Object.defineProperty(this.options,"jsonInterface",{set:function(t){return a.methods={},a.events={},a._jsonInterface=t.map((function(t){var e,n;if(t.constant="view"===t.stateMutability||"pure"===t.stateMutability||t.constant,t.payable="payable"===t.stateMutability||t.payable,t.name&&(n=s._jsonInterfaceMethodToString(t)),"function"===t.type){if(t.signature=l.encodeFunctionSignature(n),e=a._createTxObject.bind({method:t,parent:a}),a.methods[t.name]){var o=a._createTxObject.bind({method:t,parent:a,nextMethod:a.methods[t.name]});a.methods[t.name]=o}else a.methods[t.name]=e;a.methods[t.signature]=e,a.methods[n]=e}else if("event"===t.type){t.signature=l.encodeEventSignature(n);var r=a._on.bind(a,t.signature);a.events[t.name]&&"bound "!==a.events[t.name].name||(a.events[t.name]=r),a.events[t.signature]=r,a.events[n]=r}return t})),a.events.allEvents=a._on.bind(a,"allevents"),a._jsonInterface},get:function(){return a._jsonInterface},enumerable:!0});var d=this.constructor.defaultAccount,h=this.constructor.defaultBlock||"latest";Object.defineProperty(this,"handleRevert",{get:function(){return!1===a.options.handleRevert||!0===a.options.handleRevert?a.options.handleRevert:this.constructor.handleRevert},set:function(t){a.options.handleRevert=t},enumerable:!0}),Object.defineProperty(this,"defaultCommon",{get:function(){return a.options.common||this.constructor.defaultCommon},set:function(t){a.options.common=t},enumerable:!0}),Object.defineProperty(this,"defaultHardfork",{get:function(){return a.options.hardfork||this.constructor.defaultHardfork},set:function(t){a.options.hardfork=t},enumerable:!0}),Object.defineProperty(this,"defaultChain",{get:function(){return a.options.chain||this.constructor.defaultChain},set:function(t){a.options.chain=t},enumerable:!0}),Object.defineProperty(this,"transactionPollingTimeout",{get:function(){return 0===a.options.transactionPollingTimeout?a.options.transactionPollingTimeout:a.options.transactionPollingTimeout||this.constructor.transactionPollingTimeout},set:function(t){a.options.transactionPollingTimeout=t},enumerable:!0}),Object.defineProperty(this,"transactionConfirmationBlocks",{get:function(){return 0===a.options.transactionConfirmationBlocks?a.options.transactionConfirmationBlocks:a.options.transactionConfirmationBlocks||this.constructor.transactionConfirmationBlocks},set:function(t){a.options.transactionConfirmationBlocks=t},enumerable:!0}),Object.defineProperty(this,"transactionBlockTimeout",{get:function(){return 0===a.options.transactionBlockTimeout?a.options.transactionBlockTimeout:a.options.transactionBlockTimeout||this.constructor.transactionBlockTimeout},set:function(t){a.options.transactionBlockTimeout=t},enumerable:!0}),Object.defineProperty(this,"defaultAccount",{get:function(){return d},set:function(t){return t&&(d=s.toChecksumAddress(c.inputAddressFormatter(t))),t},enumerable:!0}),Object.defineProperty(this,"defaultBlock",{get:function(){return h},set:function(t){return h=t,t},enumerable:!0}),this.methods={},this.events={},this._address=null,this._jsonInterface=[],this.options.address=n,this.options.jsonInterface=e};d.setProvider=function(t,e){r.packageInit(this,[t]),this._ethAccounts=e},d.prototype._getCallback=function(t){if(t&&t[t.length-1]&&"function"==typeof t[t.length-1])return t.pop()},d.prototype._checkListener=function(t,e){if(e===t)throw u.ContractReservedEventError(t)},d.prototype._getOrSetDefaultOptions=function(t){var e=t.gasPrice?String(t.gasPrice):null,n=t.from?s.toChecksumAddress(c.inputAddressFormatter(t.from)):null;return t.data=t.data||this.options.data,t.from=n||this.options.from,t.gasPrice=e||this.options.gasPrice,t.gas=t.gas||t.gasLimit||this.options.gas,delete t.gasLimit,t},d.prototype._encodeEventABI=function(t,e){var n=(e=e||{}).filter||{},o={};if(["fromBlock","toBlock"].filter((function(t){return void 0!==e[t]})).forEach((function(t){o[t]=c.inputBlockNumberFormatter(e[t])})),Array.isArray(e.topics))o.topics=e.topics;else{if(o.topics=[],t&&!t.anonymous&&"ALLEVENTS"!==t.name&&o.topics.push(t.signature),"ALLEVENTS"!==t.name){var r=t.inputs.filter((function(t){return!0===t.indexed})).map((function(t){var e=n[t.name];return e?Array.isArray(e)?e.map((function(e){return l.encodeParameter(t.type,e)})):l.encodeParameter(t.type,e):null}));o.topics=o.topics.concat(r)}o.topics.length||delete o.topics}return this.options.address&&(o.address=this.options.address.toLowerCase()),o},d.prototype._decodeEventABI=function(t){var e=this;t.data=t.data||"",t.topics=t.topics||[];var n=c.outputLogFormatter(t);if("ALLEVENTS"===e.name&&(e=e.jsonInterface.find((function(e){return e.signature===t.topics[0]}))||{anonymous:!0}),e.inputs=e.inputs||[],!e.anonymous){let n=0;e.inputs.forEach((t=>t.indexed?n++:null)),n>0&&t.topics.length!==n+1&&(e={anonymous:!0,inputs:[]})}var o=e.anonymous?t.topics:t.topics.slice(1);return n.returnValues=l.decodeLog(e.inputs,t.data,o),delete n.returnValues.__length__,n.event=e.name,n.signature=e.anonymous||!t.topics[0]?null:t.topics[0],n.raw={data:n.data,topics:n.topics},delete n.data,delete n.topics,n},d.prototype._encodeMethodABI=function(){var t=this._method.signature,e=this.arguments||[],n=!1,o=this._parent.options.jsonInterface.filter((function(e){return"constructor"===t&&e.type===t||(e.signature===t||e.signature===t.replace("0x","")||e.name===t)&&"function"===e.type})).map((function(t){var o=Array.isArray(t.inputs)?t.inputs.length:0;if(o!==e.length)throw new Error("The number of arguments is not matching the methods required number. You need to pass "+o+" arguments.");return"function"===t.type&&(n=t.signature),Array.isArray(t.inputs)?t.inputs:[]})).map((function(t){return l.encodeParameters(t,e).replace("0x","")}))[0]||"";if("constructor"===t){if(!this._deployData)throw new Error("The contract has no contract data option set. This is necessary to append the constructor parameters.");return this._deployData.startsWith("0x")||(this._deployData="0x"+this._deployData),this._deployData+o}var r=n?n+o:o;if(!r)throw new Error("Couldn't find a matching contract method named \""+this._method.name+'".');return r},d.prototype._decodeMethodReturn=function(t,e){if(!e)return null;e=e.length>=2?e.slice(2):e;var n=l.decodeParameters(t,e);return 1===n.__length__?n[0]:(delete n.__length__,n)},d.prototype.deploy=function(t,e){if((t=t||{}).arguments=t.arguments||[],!(t=this._getOrSetDefaultOptions(t)).data){if("function"==typeof e)return e(u.ContractMissingDeployDataError());throw u.ContractMissingDeployDataError()}var n=this.options.jsonInterface.find((t=>"constructor"===t.type))||{};return n.signature="constructor",this._createTxObject.apply({method:n,parent:this,deployData:t.data,_ethAccounts:this.constructor._ethAccounts},t.arguments)},d.prototype._generateEventOptions=function(){var t=Array.prototype.slice.call(arguments),e=this._getCallback(t),n="object"===(!!t[t.length-1]&&typeof t[t.length-1])?t.pop():{},o="string"==typeof t[0]?t[0]:"allevents",r="allevents"===o.toLowerCase()?{name:"ALLEVENTS",jsonInterface:this.options.jsonInterface}:this.options.jsonInterface.find((function(t){return"event"===t.type&&(t.name===o||t.signature==="0x"+o.replace("0x",""))}));if(!r)throw u.ContractEventDoesNotExistError(o);if(!s.isAddress(this.options.address))throw u.ContractNoAddressDefinedError();return{params:this._encodeEventABI(r,n),event:r,callback:e}},d.prototype.clone=function(){return new this.constructor(this.options.jsonInterface,this.options.address,this.options)},d.prototype.once=function(t,e,n){var o=Array.prototype.slice.call(arguments);if(!(n=this._getCallback(o)))throw u.ContractOnceRequiresCallbackError();e&&delete e.fromBlock,this._on(t,e,(function(t,e,o){o.unsubscribe(),"function"==typeof n&&n(t,e,o)}))},d.prototype._on=function(){var t=this._generateEventOptions.apply(this,arguments);t.params&&t.params.toBlock&&(delete t.params.toBlock,o.warn("Invalid option: toBlock. Use getPastEvents for specific range.")),this._checkListener("newListener",t.event.name),this._checkListener("removeListener",t.event.name);var e=new i({subscription:{params:1,inputFormatter:[c.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(t.event),subscriptionHandler:function(t){t.removed?this.emit("changed",t):this.emit("data",t),"function"==typeof this.callback&&this.callback(null,t,this)}},type:"eth",requestManager:this._requestManager});return e.subscribe("logs",t.params,t.callback||function(){}),e},d.prototype.getPastEvents=function(){var t=this._generateEventOptions.apply(this,arguments),e=new a({name:"getPastLogs",call:"eth_getLogs",params:1,inputFormatter:[c.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(t.event)});e.setRequestManager(this._requestManager);var n=e.buildCall();return e=null,n(t.params,t.callback)},d.prototype._createTxObject=function(){var t=Array.prototype.slice.call(arguments),e={};if("function"===this.method.type&&(e.call=this.parent._executeMethod.bind(e,"call"),e.call.request=this.parent._executeMethod.bind(e,"call",!0)),e.send=this.parent._executeMethod.bind(e,"send"),e.send.request=this.parent._executeMethod.bind(e,"send",!0),e.encodeABI=this.parent._encodeMethodABI.bind(e),e.estimateGas=this.parent._executeMethod.bind(e,"estimate"),t&&this.method.inputs&&t.length!==this.method.inputs.length){if(this.nextMethod)return this.nextMethod.apply(null,t);throw u.InvalidNumberOfParams(t.length,this.method.inputs.length,this.method.name)}return e.arguments=t||[],e._method=this.method,e._parent=this.parent,e._ethAccounts=this.parent.constructor._ethAccounts||this._ethAccounts,this.deployData&&(e._deployData=this.deployData),e},d.prototype._processExecuteArguments=function(t,e){var n={};if(n.type=t.shift(),n.callback=this._parent._getCallback(t),"call"!==n.type||!0===t[t.length-1]||"string"!=typeof t[t.length-1]&&!isFinite(t[t.length-1])||(n.defaultBlock=t.pop()),n.options="object"===(!!t[t.length-1]&&typeof t[t.length-1])?t.pop():{},n.generateRequest=!0===t[t.length-1]&&t.pop(),n.options=this._parent._getOrSetDefaultOptions(n.options),n.options.data=this.encodeABI(),!this._deployData&&!s.isAddress(this._parent.options.address))throw u.ContractNoAddressDefinedError();return this._deployData||(n.options.to=this._parent.options.address),n.options.data?n:s._fireError(new Error("Couldn't find a matching contract method, or the number of parameters is wrong."),e.eventEmitter,e.reject,n.callback)},d.prototype._executeMethod=function(){var t=this,e=this._parent._processExecuteArguments.call(this,Array.prototype.slice.call(arguments),n),n=p("send"!==e.type),o=t.constructor._ethAccounts||t._ethAccounts;if(e.generateRequest){var r={params:[c.inputCallFormatter.call(this._parent,e.options)],callback:e.callback};return"call"===e.type?(r.params.push(c.inputDefaultBlockNumberFormatter.call(this._parent,e.defaultBlock)),r.method="eth_call",r.format=this._parent._decodeMethodReturn.bind(null,this._method.outputs)):r.method="eth_sendTransaction",r}switch(e.type){case"estimate":var i=new a({name:"estimateGas",call:"eth_estimateGas",params:1,inputFormatter:[c.inputCallFormatter],outputFormatter:s.hexToNumber,requestManager:t._parent._requestManager,accounts:o,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock}).createFunction();return i(e.options,e.callback);case"call":var d=new a({name:"call",call:"eth_call",params:2,inputFormatter:[c.inputCallFormatter,c.inputDefaultBlockNumberFormatter],outputFormatter:function(e){return t._parent._decodeMethodReturn(t._method.outputs,e)},requestManager:t._parent._requestManager,accounts:o,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock,handleRevert:t._parent.handleRevert,abiCoder:l}).createFunction();return d(e.options,e.defaultBlock,e.callback);case"send":if(!s.isAddress(e.options.from))return s._fireError(u.ContractNoFromAddressDefinedError(),n.eventEmitter,n.reject,e.callback);if("boolean"==typeof this._method.payable&&!this._method.payable&&e.options.value&&e.options.value>0)return s._fireError(new Error("Can not send value to non-payable contract method or constructor"),n.eventEmitter,n.reject,e.callback);var h={receiptFormatter:function(e){if(Array.isArray(e.logs)){var n=e.logs.map((e=>t._parent._decodeEventABI.call({name:"ALLEVENTS",jsonInterface:t._parent.options.jsonInterface},e)));e.events={};var o=0;n.forEach((function(t){t.event?e.events[t.event]?Array.isArray(e.events[t.event])?e.events[t.event].push(t):e.events[t.event]=[e.events[t.event],t]:e.events[t.event]=t:(e.events[o]=t,o++)})),delete e.logs}return e},contractDeployFormatter:function(e){var n=t._parent.clone();return n.options.address=e.contractAddress,n}},f=new a({name:"sendTransaction",call:"eth_sendTransaction",params:1,inputFormatter:[c.inputTransactionFormatter],requestManager:t._parent._requestManager,accounts:t.constructor._ethAccounts||t._ethAccounts,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock,transactionBlockTimeout:t._parent.transactionBlockTimeout,transactionConfirmationBlocks:t._parent.transactionConfirmationBlocks,transactionPollingTimeout:t._parent.transactionPollingTimeout,defaultCommon:t._parent.defaultCommon,defaultChain:t._parent.defaultChain,defaultHardfork:t._parent.defaultHardfork,handleRevert:t._parent.handleRevert,extraFormatters:h,abiCoder:l}).createFunction();return f(e.options,e.callback);default:throw new Error('Method "'+e.type+'" not implemented.')}},t.exports=d}}]);